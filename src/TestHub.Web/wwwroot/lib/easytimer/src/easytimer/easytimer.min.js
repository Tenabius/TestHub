/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/easytimer.js@4.5.4/src/easytimer/easytimer.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import TimeCounter from"./timeCounter";import EventEmitter from"./eventEmitter";const SECOND_TENTHS_PER_SECOND=10,SECONDS_PER_MINUTE=60,MINUTES_PER_HOUR=60,HOURS_PER_DAY=24,SECOND_TENTHS_POSITION=0,SECONDS_POSITION=1,MINUTES_POSITION=2,HOURS_POSITION=3,DAYS_POSITION=4,SECOND_TENTHS="secondTenths",SECONDS="seconds",MINUTES="minutes",HOURS="hours",DAYS="days",VALID_INPUT_VALUES=[SECOND_TENTHS,SECONDS,MINUTES,HOURS,DAYS],unitsInMilliseconds={secondTenths:100,seconds:1e3,minutes:6e4,hours:36e5,days:864e5},groupedUnits={secondTenths:10,seconds:60,minutes:60,hours:24};function mod(n,t){return(n%t+t)%t}function Timer(n={}){const t=new TimeCounter;let e,s=new TimeCounter;const o=new EventEmitter;let i,r,u,c,a,d,f,l,h,S=!1,T=!1,E={};const m={detail:{timer:this}};function I(n,e){const o=s[e];return function(n,e){const o=groupedUnits[n];s[n]=e,t[n]=n===DAYS?Math.abs(e):mod(e>=0?e:o-mod(e,o),o)}(e,C(n,unitsInMilliseconds[e])),s[e]!==o}function N(){p(),t.reset(),s.reset()}function p(){clearInterval(e),e=void 0,S=!1,T=!1}function O(n){b()?(l=D(),a=M(c.target)):A(n),function(){const n=unitsInMilliseconds[i];if(y(v(Date.now())))return;e=setInterval(U,n),S=!0,T=!1}()}function D(){return v(Date.now())-s.secondTenths*unitsInMilliseconds.secondTenths*r}function U(){const n=v(Date.now());!function(n){n.secondTenths&&L("secondTenthsUpdated",m);n.seconds&&L("secondsUpdated",m);n.minutes&&L("minutesUpdated",m);n.hours&&L("hoursUpdated",m);n.days&&L("daysUpdated",m)}(_()),u(m.detail.timer),y(n)&&(P(),L("targetAchieved",m))}function _(n=v(Date.now())){const t=r>0?n-l:l-n,e={};return e.secondTenths=I(t,SECOND_TENTHS),e.seconds=function(n){return I(n,SECONDS)}(t),e.minutes=function(n){return I(n,MINUTES)}(t),e.hours=function(n){return I(n,HOURS)}(t),e.days=function(n){return I(n,DAYS)}(t),e}function v(n){return Math.floor(n/unitsInMilliseconds[i])*unitsInMilliseconds[i]}function y(n){return a instanceof Array&&n>=h}function A(n){var e;i=function(n){if(!function(n){return VALID_INPUT_VALUES.indexOf(n)>=0}(n="string"==typeof n?n:SECONDS))throw new Error(`Error in precision parameter: ${n} is not a valid value`);return n}((n=n||{}).precision),u="function"==typeof n.callback?n.callback:function(){},f=!0===n.countdown,r=!0===f?-1:1,"object"==typeof n.startValues?(e=n.startValues,d=g(e),t.secondTenths=d[0],t.seconds=d[1],t.minutes=d[2],t.hours=d[3],t.days=d[4],s=w(d,s)):d=null,l=D(),_(),"object"==typeof n.target?a=M(n.target):f?(n.target={seconds:0},a=M(n.target)):a=null,E={precision:i,callback:u,countdown:"object"==typeof n&&!0===n.countdown,target:a,startValues:d},c=n}function g(n){let t;if("object"==typeof n)if(n instanceof Array){if(5!==n.length)throw new Error("Array size not valid");t=n}else{for(const t in n)if(VALID_INPUT_VALUES.indexOf(t)<0)throw new Error(`Error in startValues or target parameter: ${t} is not a valid input value`);t=[n.secondTenths||0,n.seconds||0,n.minutes||0,n.hours||0,n.days||0]}t=t.map((n=>parseInt(n,10)));const e=t[0],s=t[1]+C(e,10),o=t[2]+C(s,60),i=t[3]+C(o,60),r=t[4]+C(i,24);return t[0]=e%10,t[1]=s%60,t[2]=o%60,t[3]=i%24,t[4]=r,t}function C(n,t){const e=n/t;return e<0?Math.ceil(e):Math.floor(e)}function M(n){if(!n)return;a=g(n);const t=w(a);return h=l+t.secondTenths*unitsInMilliseconds.secondTenths*r,a}function w(n,t){const e=t||{};return e.days=n[4],e.hours=24*e.days+n[3],e.minutes=60*e.hours+n[2],e.seconds=60*e.minutes+n[1],e.secondTenths=10*e.seconds+n[[0]],e}function P(){N(),L("stopped",m)}function V(n,t){o.on(n,t)}function H(n,t){o.removeListener(n,t)}function L(n,t){o.emit(n,t)}function R(){return S}function b(){return T}A(n),void 0!==this&&(this.start=function(t={}){t={...n,...t},R()||(O(t),L("started",m))},this.pause=function(){p(),T=!0,L("paused",m)},this.stop=P,this.reset=function(){N(),O(c),L("reset",m)},this.isRunning=R,this.isPaused=b,this.getTimeValues=function(){return t},this.getTotalTimeValues=function(){return s},this.getConfig=function(){return E},this.addEventListener=V,this.on=V,this.removeEventListener=H,this.removeAllEventListeners=function(n){o.removeAllListeners(n)},this.off=H)}export default Timer;export{Timer};
//# sourceMappingURL=/sm/845bdb36e44d7518a880f70eb779a347c07ae948448facadbaf3f5949055a626.map